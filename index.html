<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>אפליקציית כושר ותזונה</title>
    <style>
        /* ... (previous styles remain unchanged) ... */
        .error {
            color: red;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>אפליקציית כושר ותזונה</h1>
        
        <div class="section" id="profile">
            <h2>פרופיל לקוח</h2>
            <input type="number" id="age" placeholder="גיל">
            <input type="number" id="weight" placeholder="משקל (ק״ג)">
            <input type="number" id="height" placeholder="גובה (ס״מ)">
            <select id="gender">
                <option value="">בחר מגדר</option>
                <option value="male">זכר</option>
                <option value="female">נקבה</option>
            </select>
            <select id="goal">
                <option value="">בחר מטרה</option>
                <option value="lose">ירידה במשקל</option>
                <option value="maintain">שמירה על המשקל</option>
                <option value="gain">עלייה במשקל</option>
            </select>
            <select id="activityLevel">
                <option value="">רמת פעילות יומית</option>
                <option value="sedentary">יושבני (מעט או ללא פעילות)</option>
                <option value="light">פעילות קלה (1-3 ימים בשבוע)</option>
                <option value="moderate">פעילות בינונית (3-5 ימים בשבוע)</option>
                <option value="active">פעילות גבוהה (6-7 ימים בשבוע)</option>
                <option value="veryActive">פעילות גבוהה מאוד (ספורטאי מקצועי)</option>
            </select>
            <button onclick="calculateCalories()">חשב קלוריות יומיות</button>
            <div id="caloriesResult" class="result"></div>
            <div id="caloriesError" class="error"></div>
        </div>

        <!-- ... (rest of the HTML remains unchanged) ... -->

    </div>

    <script>
        function calculateCalories() {
            const age = parseInt(document.getElementById('age').value);
            const weight = parseFloat(document.getElementById('weight').value);
            const height = parseFloat(document.getElementById('height').value);
            const gender = document.getElementById('gender').value;
            const goal = document.getElementById('goal').value;
            const activityLevel = document.getElementById('activityLevel').value;

            const errorElement = document.getElementById('caloriesError');
            const resultElement = document.getElementById('caloriesResult');

            // Reset previous results and errors
            errorElement.textContent = '';
            resultElement.innerHTML = '';
            resultElement.style.display = 'none';

            // Validate inputs
            if (isNaN(age) || isNaN(weight) || isNaN(height) || !gender || !goal || !activityLevel) {
                errorElement.textContent = 'אנא מלא את כל השדות בצורה תקינה.';
                return;
            }

            // Calculate BMR (Basal Metabolic Rate) using the Mifflin-St Jeor Equation
            let bmr;
            if (gender === 'male') {
                bmr = 10 * weight + 6.25 * height - 5 * age + 5;
            } else {
                bmr = 10 * weight + 6.25 * height - 5 * age - 161;
            }

            // Adjust for activity level
            let tdee;
            switch(activityLevel) {
                case 'sedentary':
                    tdee = bmr * 1.2;
                    break;
                case 'light':
                    tdee = bmr * 1.375;
                    break;
                case 'moderate':
                    tdee = bmr * 1.55;
                    break;
                case 'active':
                    tdee = bmr * 1.725;
                    break;
                case 'veryActive':
                    tdee = bmr * 1.9;
                    break;
                default:
                    tdee = bmr;
            }

            // Adjust for goal
            let dailyCalories;
            switch(goal) {
                case 'lose':
                    dailyCalories = tdee * 0.85;
                    break;
                case 'maintain':
                    dailyCalories = tdee;
                    break;
                case 'gain':
                    dailyCalories = tdee * 1.15;
                    break;
                default:
                    dailyCalories = tdee;
            }

            resultElement.innerHTML = `<strong>הקלוריות היומיות המומלצות:</strong> ${Math.round(dailyCalories)} קלוריות`;
            resultElement.style.display = 'block';
        }

        // ... (rest of the JavaScript remains unchanged) ...
    </script>
</body>
</html>
